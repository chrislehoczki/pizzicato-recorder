{"id":"../index.js","dependencies":[{"name":"/Users/chris/Desktop/pizzicato-recorder/package.json","includedInParent":true,"mtime":1558588419757}],"generated":{"js":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = PizzicatoRecorder;\n\nfunction PizzicatoRecorder(Pizzicato) {\n  Pizzicato.Recorder = {\n    instance: null,\n    worker: null,\n    start: function start(options) {\n      this.options = options;\n\n      if (!this.worker) {\n        // create our worker\n        this.worker = this.createWorker(); // listen for events\n\n        this.worker.onmessage = function (e) {\n          switch (e.data.type) {\n            case 'audioBlob':\n              Pizzicato.Events.trigger('audioFile', e.data.audioBlob);\n              break;\n\n            case 'progress':\n              Pizzicato.Events.trigger('conversionProgress', e.data.progress);\n              break;\n          }\n        };\n      } // attach our nodes\n\n\n      var source = this.processNodes(); // create a new recorder controller with our connected source\n\n      if (!this.instance) {\n        this.instance = new this.controller(source, null, this.worker);\n      } // clear out any old worker data\n\n\n      this.comms.clear.call(this); // start recording\n\n      this.instance.record();\n    },\n    stop: function stop(fileType, callback, progress) {\n      // stop recording\n      this.instance.stop(); // stop our worker from taking data\n\n      this.comms.stop.call(this); // choose export according to filetype\n\n      if (fileType === 'mp3') {\n        this.comms.exportMP3.call(this);\n      } else {\n        this.comms.exportWAV.call(this);\n      }\n\n      if (this.options.mute) {\n        // reconnect our speakers  with timeout to avoid click\n        setTimeout(function () {\n          return Pizzicato.masterGainNode.connect(Pizzicato.context.destination);\n        }, 50);\n      }\n\n      function endCallback(file) {\n        callback(file, fileType);\n        Pizzicato.Events.off('audioFile', endCallback);\n      }\n\n      function progressCallback() {\n        progress();\n        Pizzicato.Events.off('conversionProgress', progressCallback);\n      } // attach event listeners\n\n\n      Pizzicato.Events.on('conversionProgress', progressCallback);\n      Pizzicato.Events.on('audioFile', endCallback); // remove options\n\n      this.options = null;\n    },\n    processNodes: function processNodes() {\n      // connect our master gain node to a media stream destination for processing audio\n      var source = Pizzicato.masterGainNode;\n      var dest = Pizzicato.context.createMediaStreamDestination();\n      var speaker = Pizzicato.context.destination;\n\n      if (this.options.mute) {\n        source.disconnect(speaker);\n      }\n\n      source.connect(dest);\n      return source;\n    },\n    comms: {\n      clear: function clear() {\n        this.worker.postMessage({\n          command: 'clear'\n        });\n      },\n      stop: function stop() {\n        this.worker.postMessage({\n          command: 'stopRecord'\n        });\n      },\n      exportWAV: function exportWAV() {\n        this.worker.postMessage({\n          command: 'exportWAV',\n          type: 'audio/wav'\n        });\n      },\n      exportMP3: function exportMP3() {\n        this.worker.postMessage({\n          command: 'exportStereoMP3',\n          type: 'audio/wav'\n        });\n      }\n    },\n    controller: function controller(source, cfg, worker) {\n      var recording = false;\n      var config = cfg || {};\n      var bufferLen = config.bufferLen || 4096;\n      this.context = source.context;\n\n      if (!this.context.createScriptProcessor) {\n        this.node = this.context.createJavaScriptNode(bufferLen, 2, 2);\n      } else {\n        this.node = this.context.createScriptProcessor(bufferLen, 2, 2);\n      }\n\n      worker.postMessage({\n        command: 'init',\n        config: {\n          sampleRate: this.context.sampleRate\n        }\n      });\n\n      this.node.onaudioprocess = function (e) {\n        if (!recording) return;\n        worker.postMessage({\n          command: 'record',\n          buffer: [e.inputBuffer.getChannelData(0), e.inputBuffer.getChannelData(1)]\n        });\n      };\n\n      this.record = function () {\n        recording = true;\n      };\n\n      this.stop = function () {\n        recording = false;\n      };\n\n      source.connect(this.node);\n      this.node.connect(this.context.destination);\n    },\n    createWorker: function createWorker() {\n      var blob = new Blob([this.workerString], {\n        type: \"text/javascript\"\n      }); // Note: window.webkitURL.createObjectURL() in Chrome 10+.\n\n      return new Worker(window.URL.createObjectURL(blob));\n    },\n    workerString: \"\\n      function createLog(action) {\\n        console.info('Recorder: ' + action);\\n      }\\n\\n      // some params \\n      var recLength = 0;\\n      var sampleRate;\\n\\n      // original recorded buffers\\n      var recBuffersL = [];\\n      var recBuffersR = [];\\n\\n      // comms\\n      this.onmessage = function (e) {\\n        switch (e.data.command) {\\n          case 'init':\\n            init(e.data.config);\\n            break;\\n          case 'record':\\n            record(e.data.buffer);\\n            break;\\n          case 'stopRecord':\\n            createSamples();\\n            break;\\n          case 'exportWAV':\\n            exportWAV(e.data.type);\\n            break;\\n          case 'clear':\\n            clear();\\n            break;\\n        }\\n      };\\n\\n      function init (config) {\\n        sampleRate = config.sampleRate;\\n      }\\n\\n      function record (inputBuffer) {\\n        // push to our original buffers\\n        recBuffersL.push(inputBuffer[0]);\\n        recBuffersR.push(inputBuffer[1]);\\n\\n        // store the recording length\\n        recLength += inputBuffer[0].length;\\n      }\\n\\n      function exportWAV (type) {\\n        // merge all our buffers\\n        recBuffersL = mergeBuffers(recBuffersL, recLength);\\n        recBuffersR = mergeBuffers(recBuffersR, recLength);\\n        // create our samples from our buffer for wav\\n        var samples = createSamples();\\n        // make the wav\\n        var dataview = encodeWAV(samples);\\n        var audioBlob = new Blob([dataview], { type: 'audio/wav' });\\n        // post it back\\n        this.postMessage({ type: 'audioBlob', audioBlob: audioBlob });\\n      }\\n\\n      function createSamples() {\\n        return interleave(recBuffersL, recBuffersR)\\n      }\\n\\n      function clear () {\\n        recLength = 0;\\n        recBuffersL = [];\\n        recBuffersR = [];\\n      }\\n\\n      function mergeBuffers (recBuffers, recLength) {\\n        var result = new Float32Array(recLength);\\n        var offset = 0;\\n        for (var i = 0; i < recBuffers.length; i++) {\\n          result.set(recBuffers[i], offset);\\n          offset += recBuffers[i].length;\\n        }\\n        return result;\\n      }\\n\\n      function interleave (inputL, inputR) {\\n        var length = inputL.length + inputR.length;\\n        var result = new Float32Array(length);\\n\\n        var index = 0,\\n          inputIndex = 0;\\n\\n        while (index < length) {\\n          result[index++] = inputL[inputIndex];\\n          result[index++] = inputR[inputIndex];\\n          inputIndex++;\\n        }\\n        return result;\\n      }\\n\\n      function floatTo16BitPCM (output, offset, input) {\\n        for (var i = 0; i < input.length; i++, offset += 2) {\\n          var s = Math.max(-1, Math.min(1, input[i]));\\n          output.setInt16(offset, s < 0 ? s * 0x8000 : s * 0x7fff, true);\\n        }\\n      }\\n\\n      function writeString (view, offset, string) {\\n        for (var i = 0; i < string.length; i++) {\\n          view.setUint8(offset + i, string.charCodeAt(i));\\n        }\\n      }\\n\\n      function encodeWAV (samples, mono) {\\n        var buffer = new ArrayBuffer(44 + samples.length * 2);\\n        var view = new DataView(buffer);\\n\\n        /* RIFF identifier */\\n        writeString(view, 0, 'RIFF');\\n        /* file length */\\n        view.setUint32(4, 32 + samples.length * 2, true);\\n        /* RIFF type */\\n        writeString(view, 8, 'WAVE');\\n        /* format chunk identifier */\\n        writeString(view, 12, 'fmt ');\\n        /* format chunk length */\\n        view.setUint32(16, 16, true);\\n        /* sample format (raw) */\\n        view.setUint16(20, 1, true);\\n        /* channel count */\\n        view.setUint16(22, mono ? 1 : 2, true);\\n        /* sample rate */\\n        view.setUint32(24, sampleRate, true);\\n        /* byte rate (sample rate * block align) */\\n        view.setUint32(28, sampleRate * 4, true);\\n        /* block align (channel count * bytes per sample) */\\n        view.setUint16(32, 4, true);\\n        /* bits per sample */\\n        view.setUint16(34, 16, true);\\n        /* data chunk identifier */\\n        writeString(view, 36, 'data');\\n        /* data chunk length */\\n        view.setUint32(40, samples.length * 2, true);\\n\\n        floatTo16BitPCM(view, 44, samples);\\n\\n        return view;\\n      }\\n\\n      function convertBuffer (buffers) {\\n        var lo = buffers[0];\\n        var ro = buffers[1];\\n\\n        // if we are not a float32array already, lets merge standard array of float32s to one float32\\n        if (buffers[0].constructor !== Float32Array) {\\n            lo = mergeBuffers(buffers[0], recLength);\\n            ro = mergeBuffers(buffers[1], recLength);\\n        }\\n\\n        var l = new Float32Array(lo.length); // The transformed data, this is what you will pass to lame instead\\n        var r = new Float32Array(ro.length);\\n\\n        // Convert to required format\\n        for (var i = 0; i < lo.length; i++) {\\n          l[i] = lo[i] * 32767.5;\\n          r[i] = ro[i] * 32767.5;\\n        }\\n\\n        return { l: l, r: r };\\n      }\\n    \"\n  };\n}"},"sourceMaps":{"js":{"mappings":[{"generated":{"line":8,"column":0},"source":"../index.js","original":{"line":1,"column":15}},{"name":"PizzicatoRecorder","generated":{"line":8,"column":9},"source":"../index.js","original":{"line":1,"column":24}},{"generated":{"line":8,"column":26},"source":"../index.js","original":{"line":1,"column":15}},{"name":"Pizzicato","generated":{"line":8,"column":27},"source":"../index.js","original":{"line":1,"column":42}},{"generated":{"line":8,"column":36},"source":"../index.js","original":{"line":1,"column":15}},{"generated":{"line":8,"column":38},"source":"../index.js","original":{"line":1,"column":53}},{"name":"Pizzicato","generated":{"line":9,"column":0},"source":"../index.js","original":{"line":2,"column":2}},{"name":"Pizzicato","generated":{"line":9,"column":2},"source":"../index.js","original":{"line":2,"column":2}},{"generated":{"line":9,"column":11},"source":"../index.js","original":{"line":2,"column":11}},{"name":"Recorder","generated":{"line":9,"column":12},"source":"../index.js","original":{"line":2,"column":12}},{"generated":{"line":9,"column":20},"source":"../index.js","original":{"line":2,"column":2}},{"generated":{"line":9,"column":23},"source":"../index.js","original":{"line":2,"column":23}},{"name":"instance","generated":{"line":10,"column":0},"source":"../index.js","original":{"line":3,"column":4}},{"name":"instance","generated":{"line":10,"column":4},"source":"../index.js","original":{"line":3,"column":4}},{"generated":{"line":10,"column":12},"source":"../index.js","original":{"line":3,"column":12}},{"generated":{"line":10,"column":14},"source":"../index.js","original":{"line":3,"column":14}},{"generated":{"line":10,"column":18},"source":"../index.js","original":{"line":2,"column":23}},{"name":"worker","generated":{"line":11,"column":0},"source":"../index.js","original":{"line":4,"column":4}},{"name":"worker","generated":{"line":11,"column":4},"source":"../index.js","original":{"line":4,"column":4}},{"generated":{"line":11,"column":10},"source":"../index.js","original":{"line":4,"column":10}},{"generated":{"line":11,"column":12},"source":"../index.js","original":{"line":4,"column":12}},{"generated":{"line":11,"column":16},"source":"../index.js","original":{"line":2,"column":23}},{"name":"start","generated":{"line":12,"column":0},"source":"../index.js","original":{"line":5,"column":4}},{"name":"start","generated":{"line":12,"column":4},"source":"../index.js","original":{"line":5,"column":4}},{"generated":{"line":12,"column":9},"source":"../index.js","original":{"line":5,"column":9}},{"generated":{"line":12,"column":11},"source":"../index.js","original":{"line":5,"column":11}},{"name":"options","generated":{"line":12,"column":26},"source":"../index.js","original":{"line":5,"column":20}},{"generated":{"line":12,"column":33},"source":"../index.js","original":{"line":5,"column":11}},{"generated":{"line":12,"column":35},"source":"../index.js","original":{"line":5,"column":29}},{"generated":{"line":13,"column":0},"source":"../index.js","original":{"line":6,"column":6}},{"name":"options","generated":{"line":13,"column":11},"source":"../index.js","original":{"line":6,"column":11}},{"generated":{"line":13,"column":18},"source":"../index.js","original":{"line":6,"column":6}},{"name":"options","generated":{"line":13,"column":21},"source":"../index.js","original":{"line":6,"column":21}},{"generated":{"line":13,"column":28},"source":"../index.js","original":{"line":6,"column":6}},{"generated":{"line":15,"column":0},"source":"../index.js","original":{"line":7,"column":6}},{"generated":{"line":15,"column":10},"source":"../index.js","original":{"line":7,"column":10}},{"generated":{"line":15,"column":11},"source":"../index.js","original":{"line":7,"column":11}},{"name":"worker","generated":{"line":15,"column":16},"source":"../index.js","original":{"line":7,"column":16}},{"generated":{"line":15,"column":22},"source":"../index.js","original":{"line":7,"column":6}},{"generated":{"line":15,"column":24},"source":"../index.js","original":{"line":7,"column":24}},{"generated":{"line":16,"column":0},"source":"../index.js","original":{"line":8,"column":8}},{"generated":{"line":17,"column":0},"source":"../index.js","original":{"line":9,"column":8}},{"name":"worker","generated":{"line":17,"column":13},"source":"../index.js","original":{"line":9,"column":13}},{"generated":{"line":17,"column":19},"source":"../index.js","original":{"line":9,"column":8}},{"generated":{"line":17,"column":22},"source":"../index.js","original":{"line":9,"column":22}},{"name":"createWorker","generated":{"line":17,"column":27},"source":"../index.js","original":{"line":9,"column":27}},{"generated":{"line":17,"column":39},"source":"../index.js","original":{"line":9,"column":22}},{"generated":{"line":17,"column":41},"source":"../index.js","original":{"line":9,"column":8}},{"generated":{"line":17,"column":42},"source":"../index.js","original":{"line":7,"column":24}},{"generated":{"line":17,"column":43},"source":"../index.js","original":{"line":10,"column":8}},{"generated":{"line":19,"column":0},"source":"../index.js","original":{"line":11,"column":8}},{"name":"worker","generated":{"line":19,"column":13},"source":"../index.js","original":{"line":11,"column":13}},{"generated":{"line":19,"column":19},"source":"../index.js","original":{"line":11,"column":8}},{"name":"onmessage","generated":{"line":19,"column":20},"source":"../index.js","original":{"line":11,"column":20}},{"generated":{"line":19,"column":29},"source":"../index.js","original":{"line":11,"column":8}},{"generated":{"line":19,"column":32},"source":"../index.js","original":{"line":11,"column":32}},{"name":"e","generated":{"line":19,"column":42},"source":"../index.js","original":{"line":11,"column":41}},{"generated":{"line":19,"column":43},"source":"../index.js","original":{"line":11,"column":32}},{"generated":{"line":19,"column":45},"source":"../index.js","original":{"line":11,"column":44}},{"generated":{"line":20,"column":0},"source":"../index.js","original":{"line":12,"column":10}},{"name":"e","generated":{"line":20,"column":18},"source":"../index.js","original":{"line":12,"column":18}},{"generated":{"line":20,"column":19},"source":"../index.js","original":{"line":12,"column":19}},{"name":"data","generated":{"line":20,"column":20},"source":"../index.js","original":{"line":12,"column":20}},{"generated":{"line":20,"column":24},"source":"../index.js","original":{"line":12,"column":18}},{"name":"type","generated":{"line":20,"column":25},"source":"../index.js","original":{"line":12,"column":25}},{"generated":{"line":20,"column":29},"source":"../index.js","original":{"line":12,"column":10}},{"generated":{"line":21,"column":0},"source":"../index.js","original":{"line":13,"column":12}},{"generated":{"line":21,"column":17},"source":"../index.js","original":{"line":13,"column":17}},{"generated":{"line":21,"column":28},"source":"../index.js","original":{"line":13,"column":12}},{"name":"Pizzicato","generated":{"line":22,"column":0},"source":"../index.js","original":{"line":14,"column":14}},{"name":"Pizzicato","generated":{"line":22,"column":14},"source":"../index.js","original":{"line":14,"column":14}},{"generated":{"line":22,"column":23},"source":"../index.js","original":{"line":14,"column":23}},{"name":"Events","generated":{"line":22,"column":24},"source":"../index.js","original":{"line":14,"column":24}},{"generated":{"line":22,"column":30},"source":"../index.js","original":{"line":14,"column":14}},{"name":"trigger","generated":{"line":22,"column":31},"source":"../index.js","original":{"line":14,"column":31}},{"generated":{"line":22,"column":38},"source":"../index.js","original":{"line":14,"column":14}},{"generated":{"line":22,"column":39},"source":"../index.js","original":{"line":14,"column":39}},{"generated":{"line":22,"column":50},"source":"../index.js","original":{"line":14,"column":14}},{"name":"e","generated":{"line":22,"column":52},"source":"../index.js","original":{"line":14,"column":52}},{"generated":{"line":22,"column":53},"source":"../index.js","original":{"line":14,"column":53}},{"name":"data","generated":{"line":22,"column":54},"source":"../index.js","original":{"line":14,"column":54}},{"generated":{"line":22,"column":58},"source":"../index.js","original":{"line":14,"column":52}},{"name":"audioBlob","generated":{"line":22,"column":59},"source":"../index.js","original":{"line":14,"column":59}},{"generated":{"line":22,"column":68},"source":"../index.js","original":{"line":14,"column":14}},{"generated":{"line":23,"column":0},"source":"../index.js","original":{"line":15,"column":14}},{"generated":{"line":25,"column":0},"source":"../index.js","original":{"line":16,"column":12}},{"generated":{"line":25,"column":17},"source":"../index.js","original":{"line":16,"column":17}},{"generated":{"line":25,"column":27},"source":"../index.js","original":{"line":16,"column":12}},{"name":"Pizzicato","generated":{"line":26,"column":0},"source":"../index.js","original":{"line":17,"column":14}},{"name":"Pizzicato","generated":{"line":26,"column":14},"source":"../index.js","original":{"line":17,"column":14}},{"generated":{"line":26,"column":23},"source":"../index.js","original":{"line":17,"column":23}},{"name":"Events","generated":{"line":26,"column":24},"source":"../index.js","original":{"line":17,"column":24}},{"generated":{"line":26,"column":30},"source":"../index.js","original":{"line":17,"column":14}},{"name":"trigger","generated":{"line":26,"column":31},"source":"../index.js","original":{"line":17,"column":31}},{"generated":{"line":26,"column":38},"source":"../index.js","original":{"line":17,"column":14}},{"generated":{"line":26,"column":39},"source":"../index.js","original":{"line":17,"column":39}},{"generated":{"line":26,"column":59},"source":"../index.js","original":{"line":17,"column":14}},{"name":"e","generated":{"line":26,"column":61},"source":"../index.js","original":{"line":17,"column":61}},{"generated":{"line":26,"column":62},"source":"../index.js","original":{"line":17,"column":62}},{"name":"data","generated":{"line":26,"column":63},"source":"../index.js","original":{"line":17,"column":63}},{"generated":{"line":26,"column":67},"source":"../index.js","original":{"line":17,"column":61}},{"name":"progress","generated":{"line":26,"column":68},"source":"../index.js","original":{"line":17,"column":68}},{"generated":{"line":26,"column":76},"source":"../index.js","original":{"line":17,"column":14}},{"generated":{"line":27,"column":0},"source":"../index.js","original":{"line":18,"column":14}},{"generated":{"line":28,"column":0},"source":"../index.js","original":{"line":12,"column":10}},{"generated":{"line":29,"column":0},"source":"../index.js","original":{"line":20,"column":9}},{"generated":{"line":29,"column":9},"source":"../index.js","original":{"line":11,"column":8}},{"generated":{"line":30,"column":0},"source":"../index.js","original":{"line":21,"column":7}},{"generated":{"line":30,"column":7},"source":"../index.js","original":{"line":5,"column":29}},{"generated":{"line":30,"column":8},"source":"../index.js","original":{"line":22,"column":6}},{"generated":{"line":33,"column":0},"source":"../index.js","original":{"line":23,"column":6}},{"name":"source","generated":{"line":33,"column":10},"source":"../index.js","original":{"line":23,"column":10}},{"generated":{"line":33,"column":16},"source":"../index.js","original":{"line":23,"column":16}},{"generated":{"line":33,"column":19},"source":"../index.js","original":{"line":23,"column":19}},{"name":"processNodes","generated":{"line":33,"column":24},"source":"../index.js","original":{"line":23,"column":24}},{"generated":{"line":33,"column":36},"source":"../index.js","original":{"line":23,"column":19}},{"generated":{"line":33,"column":38},"source":"../index.js","original":{"line":23,"column":6}},{"generated":{"line":33,"column":39},"source":"../index.js","original":{"line":5,"column":29}},{"generated":{"line":33,"column":40},"source":"../index.js","original":{"line":24,"column":6}},{"generated":{"line":35,"column":0},"source":"../index.js","original":{"line":25,"column":6}},{"generated":{"line":35,"column":10},"source":"../index.js","original":{"line":25,"column":10}},{"generated":{"line":35,"column":11},"source":"../index.js","original":{"line":25,"column":11}},{"name":"instance","generated":{"line":35,"column":16},"source":"../index.js","original":{"line":25,"column":16}},{"generated":{"line":35,"column":24},"source":"../index.js","original":{"line":25,"column":6}},{"generated":{"line":35,"column":26},"source":"../index.js","original":{"line":25,"column":26}},{"generated":{"line":36,"column":0},"source":"../index.js","original":{"line":26,"column":8}},{"name":"instance","generated":{"line":36,"column":13},"source":"../index.js","original":{"line":26,"column":13}},{"generated":{"line":36,"column":21},"source":"../index.js","original":{"line":26,"column":8}},{"generated":{"line":36,"column":24},"source":"../index.js","original":{"line":26,"column":24}},{"generated":{"line":36,"column":28},"source":"../index.js","original":{"line":26,"column":28}},{"name":"controller","generated":{"line":36,"column":33},"source":"../index.js","original":{"line":26,"column":33}},{"generated":{"line":36,"column":43},"source":"../index.js","original":{"line":26,"column":24}},{"name":"source","generated":{"line":36,"column":44},"source":"../index.js","original":{"line":26,"column":44}},{"generated":{"line":36,"column":50},"source":"../index.js","original":{"line":26,"column":24}},{"generated":{"line":36,"column":52},"source":"../index.js","original":{"line":26,"column":52}},{"generated":{"line":36,"column":56},"source":"../index.js","original":{"line":26,"column":24}},{"generated":{"line":36,"column":58},"source":"../index.js","original":{"line":26,"column":58}},{"name":"worker","generated":{"line":36,"column":63},"source":"../index.js","original":{"line":26,"column":63}},{"generated":{"line":36,"column":69},"source":"../index.js","original":{"line":26,"column":24}},{"generated":{"line":36,"column":70},"source":"../index.js","original":{"line":26,"column":8}},{"generated":{"line":37,"column":0},"source":"../index.js","original":{"line":27,"column":7}},{"generated":{"line":37,"column":7},"source":"../index.js","original":{"line":5,"column":29}},{"generated":{"line":37,"column":8},"source":"../index.js","original":{"line":28,"column":6}},{"generated":{"line":40,"column":0},"source":"../index.js","original":{"line":29,"column":6}},{"name":"comms","generated":{"line":40,"column":11},"source":"../index.js","original":{"line":29,"column":11}},{"generated":{"line":40,"column":16},"source":"../index.js","original":{"line":29,"column":6}},{"name":"clear","generated":{"line":40,"column":17},"source":"../index.js","original":{"line":29,"column":17}},{"generated":{"line":40,"column":22},"source":"../index.js","original":{"line":29,"column":6}},{"name":"call","generated":{"line":40,"column":23},"source":"../index.js","original":{"line":29,"column":23}},{"generated":{"line":40,"column":27},"source":"../index.js","original":{"line":29,"column":6}},{"generated":{"line":40,"column":28},"source":"../index.js","original":{"line":29,"column":28}},{"generated":{"line":40,"column":32},"source":"../index.js","original":{"line":29,"column":6}},{"generated":{"line":40,"column":34},"source":"../index.js","original":{"line":5,"column":29}},{"generated":{"line":40,"column":35},"source":"../index.js","original":{"line":30,"column":6}},{"generated":{"line":42,"column":0},"source":"../index.js","original":{"line":31,"column":6}},{"name":"instance","generated":{"line":42,"column":11},"source":"../index.js","original":{"line":31,"column":11}},{"generated":{"line":42,"column":19},"source":"../index.js","original":{"line":31,"column":6}},{"name":"record","generated":{"line":42,"column":20},"source":"../index.js","original":{"line":31,"column":20}},{"generated":{"line":42,"column":26},"source":"../index.js","original":{"line":31,"column":6}},{"generated":{"line":43,"column":0},"source":"../index.js","original":{"line":32,"column":5}},{"generated":{"line":43,"column":5},"source":"../index.js","original":{"line":2,"column":23}},{"name":"stop","generated":{"line":44,"column":0},"source":"../index.js","original":{"line":33,"column":4}},{"name":"stop","generated":{"line":44,"column":4},"source":"../index.js","original":{"line":33,"column":4}},{"generated":{"line":44,"column":8},"source":"../index.js","original":{"line":33,"column":8}},{"generated":{"line":44,"column":10},"source":"../index.js","original":{"line":33,"column":10}},{"name":"fileType","generated":{"line":44,"column":24},"source":"../index.js","original":{"line":33,"column":19}},{"generated":{"line":44,"column":32},"source":"../index.js","original":{"line":33,"column":10}},{"name":"callback","generated":{"line":44,"column":34},"source":"../index.js","original":{"line":33,"column":29}},{"generated":{"line":44,"column":42},"source":"../index.js","original":{"line":33,"column":10}},{"name":"progress","generated":{"line":44,"column":44},"source":"../index.js","original":{"line":33,"column":39}},{"generated":{"line":44,"column":52},"source":"../index.js","original":{"line":33,"column":10}},{"generated":{"line":44,"column":54},"source":"../index.js","original":{"line":33,"column":49}},{"generated":{"line":45,"column":0},"source":"../index.js","original":{"line":34,"column":6}},{"generated":{"line":46,"column":0},"source":"../index.js","original":{"line":35,"column":6}},{"name":"instance","generated":{"line":46,"column":11},"source":"../index.js","original":{"line":35,"column":11}},{"generated":{"line":46,"column":19},"source":"../index.js","original":{"line":35,"column":6}},{"name":"stop","generated":{"line":46,"column":20},"source":"../index.js","original":{"line":35,"column":20}},{"generated":{"line":46,"column":24},"source":"../index.js","original":{"line":35,"column":6}},{"generated":{"line":46,"column":27},"source":"../index.js","original":{"line":33,"column":49}},{"generated":{"line":46,"column":28},"source":"../index.js","original":{"line":36,"column":6}},{"generated":{"line":48,"column":0},"source":"../index.js","original":{"line":37,"column":6}},{"name":"comms","generated":{"line":48,"column":11},"source":"../index.js","original":{"line":37,"column":11}},{"generated":{"line":48,"column":16},"source":"../index.js","original":{"line":37,"column":6}},{"name":"stop","generated":{"line":48,"column":17},"source":"../index.js","original":{"line":37,"column":17}},{"generated":{"line":48,"column":21},"source":"../index.js","original":{"line":37,"column":6}},{"name":"call","generated":{"line":48,"column":22},"source":"../index.js","original":{"line":37,"column":22}},{"generated":{"line":48,"column":26},"source":"../index.js","original":{"line":37,"column":6}},{"generated":{"line":48,"column":27},"source":"../index.js","original":{"line":37,"column":27}},{"generated":{"line":48,"column":31},"source":"../index.js","original":{"line":37,"column":6}},{"generated":{"line":48,"column":33},"source":"../index.js","original":{"line":33,"column":49}},{"generated":{"line":48,"column":34},"source":"../index.js","original":{"line":38,"column":6}},{"generated":{"line":50,"column":0},"source":"../index.js","original":{"line":39,"column":6}},{"name":"fileType","generated":{"line":50,"column":10},"source":"../index.js","original":{"line":39,"column":10}},{"generated":{"line":50,"column":18},"source":"../index.js","original":{"line":39,"column":18}},{"generated":{"line":50,"column":23},"source":"../index.js","original":{"line":39,"column":23}},{"generated":{"line":50,"column":28},"source":"../index.js","original":{"line":39,"column":6}},{"generated":{"line":50,"column":30},"source":"../index.js","original":{"line":39,"column":30}},{"generated":{"line":51,"column":0},"source":"../index.js","original":{"line":40,"column":8}},{"name":"comms","generated":{"line":51,"column":13},"source":"../index.js","original":{"line":40,"column":13}},{"generated":{"line":51,"column":18},"source":"../index.js","original":{"line":40,"column":8}},{"name":"exportMP3","generated":{"line":51,"column":19},"source":"../index.js","original":{"line":40,"column":19}},{"generated":{"line":51,"column":28},"source":"../index.js","original":{"line":40,"column":8}},{"name":"call","generated":{"line":51,"column":29},"source":"../index.js","original":{"line":40,"column":29}},{"generated":{"line":51,"column":33},"source":"../index.js","original":{"line":40,"column":8}},{"generated":{"line":51,"column":34},"source":"../index.js","original":{"line":40,"column":34}},{"generated":{"line":51,"column":38},"source":"../index.js","original":{"line":40,"column":8}},{"generated":{"line":52,"column":0},"source":"../index.js","original":{"line":41,"column":7}},{"generated":{"line":52,"column":7},"source":"../index.js","original":{"line":39,"column":6}},{"generated":{"line":52,"column":13},"source":"../index.js","original":{"line":41,"column":13}},{"generated":{"line":53,"column":0},"source":"../index.js","original":{"line":42,"column":8}},{"name":"comms","generated":{"line":53,"column":13},"source":"../index.js","original":{"line":42,"column":13}},{"generated":{"line":53,"column":18},"source":"../index.js","original":{"line":42,"column":8}},{"name":"exportWAV","generated":{"line":53,"column":19},"source":"../index.js","original":{"line":42,"column":19}},{"generated":{"line":53,"column":28},"source":"../index.js","original":{"line":42,"column":8}},{"name":"call","generated":{"line":53,"column":29},"source":"../index.js","original":{"line":42,"column":29}},{"generated":{"line":53,"column":33},"source":"../index.js","original":{"line":42,"column":8}},{"generated":{"line":53,"column":34},"source":"../index.js","original":{"line":42,"column":34}},{"generated":{"line":53,"column":38},"source":"../index.js","original":{"line":42,"column":8}},{"generated":{"line":54,"column":0},"source":"../index.js","original":{"line":43,"column":7}},{"generated":{"line":56,"column":0},"source":"../index.js","original":{"line":44,"column":6}},{"generated":{"line":56,"column":10},"source":"../index.js","original":{"line":44,"column":10}},{"name":"options","generated":{"line":56,"column":15},"source":"../index.js","original":{"line":44,"column":15}},{"generated":{"line":56,"column":22},"source":"../index.js","original":{"line":44,"column":10}},{"name":"mute","generated":{"line":56,"column":23},"source":"../index.js","original":{"line":44,"column":23}},{"generated":{"line":56,"column":27},"source":"../index.js","original":{"line":44,"column":6}},{"generated":{"line":56,"column":29},"source":"../index.js","original":{"line":44,"column":29}},{"generated":{"line":57,"column":0},"source":"../index.js","original":{"line":45,"column":8}},{"name":"setTimeout","generated":{"line":58,"column":0},"source":"../index.js","original":{"line":46,"column":8}},{"name":"setTimeout","generated":{"line":58,"column":8},"source":"../index.js","original":{"line":46,"column":8}},{"generated":{"line":58,"column":18},"source":"../index.js","original":{"line":46,"column":18}},{"generated":{"line":58,"column":19},"source":"../index.js","original":{"line":46,"column":19}},{"generated":{"line":59,"column":0},"source":"../index.js","original":{"line":46,"column":19}},{"name":"Pizzicato","generated":{"line":59,"column":17},"source":"../index.js","original":{"line":46,"column":25}},{"generated":{"line":59,"column":26},"source":"../index.js","original":{"line":46,"column":34}},{"name":"masterGainNode","generated":{"line":59,"column":27},"source":"../index.js","original":{"line":46,"column":35}},{"generated":{"line":59,"column":41},"source":"../index.js","original":{"line":46,"column":25}},{"name":"connect","generated":{"line":59,"column":42},"source":"../index.js","original":{"line":46,"column":50}},{"generated":{"line":59,"column":49},"source":"../index.js","original":{"line":46,"column":25}},{"name":"Pizzicato","generated":{"line":59,"column":50},"source":"../index.js","original":{"line":46,"column":58}},{"generated":{"line":59,"column":59},"source":"../index.js","original":{"line":46,"column":67}},{"name":"context","generated":{"line":59,"column":60},"source":"../index.js","original":{"line":46,"column":68}},{"generated":{"line":59,"column":67},"source":"../index.js","original":{"line":46,"column":58}},{"name":"destination","generated":{"line":59,"column":68},"source":"../index.js","original":{"line":46,"column":76}},{"generated":{"line":59,"column":79},"source":"../index.js","original":{"line":46,"column":25}},{"generated":{"line":59,"column":80},"source":"../index.js","original":{"line":46,"column":19}},{"generated":{"line":60,"column":0},"source":"../index.js","original":{"line":46,"column":19}},{"generated":{"line":60,"column":9},"source":"../index.js","original":{"line":46,"column":18}},{"generated":{"line":60,"column":11},"source":"../index.js","original":{"line":46,"column":90}},{"generated":{"line":60,"column":13},"source":"../index.js","original":{"line":46,"column":18}},{"generated":{"line":60,"column":14},"source":"../index.js","original":{"line":46,"column":8}},{"generated":{"line":61,"column":0},"source":"../index.js","original":{"line":47,"column":7}},{"generated":{"line":63,"column":0},"source":"../index.js","original":{"line":49,"column":6}},{"name":"endCallback","generated":{"line":63,"column":15},"source":"../index.js","original":{"line":49,"column":15}},{"generated":{"line":63,"column":26},"source":"../index.js","original":{"line":49,"column":6}},{"name":"file","generated":{"line":63,"column":27},"source":"../index.js","original":{"line":49,"column":28}},{"generated":{"line":63,"column":31},"source":"../index.js","original":{"line":49,"column":6}},{"generated":{"line":63,"column":33},"source":"../index.js","original":{"line":49,"column":34}},{"name":"callback","generated":{"line":64,"column":0},"source":"../index.js","original":{"line":50,"column":8}},{"name":"callback","generated":{"line":64,"column":8},"source":"../index.js","original":{"line":50,"column":8}},{"generated":{"line":64,"column":16},"source":"../index.js","original":{"line":50,"column":16}},{"name":"file","generated":{"line":64,"column":17},"source":"../index.js","original":{"line":50,"column":17}},{"generated":{"line":64,"column":21},"source":"../index.js","original":{"line":50,"column":16}},{"name":"fileType","generated":{"line":64,"column":23},"source":"../index.js","original":{"line":50,"column":23}},{"generated":{"line":64,"column":31},"source":"../index.js","original":{"line":50,"column":16}},{"generated":{"line":64,"column":32},"source":"../index.js","original":{"line":50,"column":8}},{"name":"Pizzicato","generated":{"line":65,"column":0},"source":"../index.js","original":{"line":51,"column":8}},{"name":"Pizzicato","generated":{"line":65,"column":8},"source":"../index.js","original":{"line":51,"column":8}},{"generated":{"line":65,"column":17},"source":"../index.js","original":{"line":51,"column":17}},{"name":"Events","generated":{"line":65,"column":18},"source":"../index.js","original":{"line":51,"column":18}},{"generated":{"line":65,"column":24},"source":"../index.js","original":{"line":51,"column":8}},{"name":"off","generated":{"line":65,"column":25},"source":"../index.js","original":{"line":51,"column":25}},{"generated":{"line":65,"column":28},"source":"../index.js","original":{"line":51,"column":8}},{"generated":{"line":65,"column":29},"source":"../index.js","original":{"line":51,"column":29}},{"generated":{"line":65,"column":40},"source":"../index.js","original":{"line":51,"column":8}},{"name":"endCallback","generated":{"line":65,"column":42},"source":"../index.js","original":{"line":51,"column":42}},{"generated":{"line":65,"column":53},"source":"../index.js","original":{"line":51,"column":8}},{"generated":{"line":66,"column":0},"source":"../index.js","original":{"line":52,"column":7}},{"generated":{"line":68,"column":0},"source":"../index.js","original":{"line":53,"column":6}},{"name":"progressCallback","generated":{"line":68,"column":15},"source":"../index.js","original":{"line":53,"column":15}},{"generated":{"line":68,"column":31},"source":"../index.js","original":{"line":53,"column":6}},{"generated":{"line":68,"column":34},"source":"../index.js","original":{"line":53,"column":35}},{"name":"progress","generated":{"line":69,"column":0},"source":"../index.js","original":{"line":54,"column":8}},{"name":"progress","generated":{"line":69,"column":8},"source":"../index.js","original":{"line":54,"column":8}},{"generated":{"line":69,"column":16},"source":"../index.js","original":{"line":54,"column":16}},{"name":"Pizzicato","generated":{"line":70,"column":0},"source":"../index.js","original":{"line":55,"column":8}},{"name":"Pizzicato","generated":{"line":70,"column":8},"source":"../index.js","original":{"line":55,"column":8}},{"generated":{"line":70,"column":17},"source":"../index.js","original":{"line":55,"column":17}},{"name":"Events","generated":{"line":70,"column":18},"source":"../index.js","original":{"line":55,"column":18}},{"generated":{"line":70,"column":24},"source":"../index.js","original":{"line":55,"column":8}},{"name":"off","generated":{"line":70,"column":25},"source":"../index.js","original":{"line":55,"column":25}},{"generated":{"line":70,"column":28},"source":"../index.js","original":{"line":55,"column":8}},{"generated":{"line":70,"column":29},"source":"../index.js","original":{"line":55,"column":29}},{"generated":{"line":70,"column":49},"source":"../index.js","original":{"line":55,"column":8}},{"name":"progressCallback","generated":{"line":70,"column":51},"source":"../index.js","original":{"line":55,"column":51}},{"generated":{"line":70,"column":67},"source":"../index.js","original":{"line":55,"column":8}},{"generated":{"line":71,"column":0},"source":"../index.js","original":{"line":56,"column":7}},{"generated":{"line":71,"column":7},"source":"../index.js","original":{"line":33,"column":49}},{"generated":{"line":71,"column":8},"source":"../index.js","original":{"line":57,"column":6}},{"name":"Pizzicato","generated":{"line":74,"column":0},"source":"../index.js","original":{"line":58,"column":6}},{"name":"Pizzicato","generated":{"line":74,"column":6},"source":"../index.js","original":{"line":58,"column":6}},{"generated":{"line":74,"column":15},"source":"../index.js","original":{"line":58,"column":15}},{"name":"Events","generated":{"line":74,"column":16},"source":"../index.js","original":{"line":58,"column":16}},{"generated":{"line":74,"column":22},"source":"../index.js","original":{"line":58,"column":6}},{"name":"on","generated":{"line":74,"column":23},"source":"../index.js","original":{"line":58,"column":23}},{"generated":{"line":74,"column":25},"source":"../index.js","original":{"line":58,"column":6}},{"generated":{"line":74,"column":26},"source":"../index.js","original":{"line":58,"column":26}},{"generated":{"line":74,"column":46},"source":"../index.js","original":{"line":58,"column":6}},{"name":"progressCallback","generated":{"line":74,"column":48},"source":"../index.js","original":{"line":58,"column":48}},{"generated":{"line":74,"column":64},"source":"../index.js","original":{"line":58,"column":6}},{"name":"Pizzicato","generated":{"line":75,"column":0},"source":"../index.js","original":{"line":59,"column":6}},{"name":"Pizzicato","generated":{"line":75,"column":6},"source":"../index.js","original":{"line":59,"column":6}},{"generated":{"line":75,"column":15},"source":"../index.js","original":{"line":59,"column":15}},{"name":"Events","generated":{"line":75,"column":16},"source":"../index.js","original":{"line":59,"column":16}},{"generated":{"line":75,"column":22},"source":"../index.js","original":{"line":59,"column":6}},{"name":"on","generated":{"line":75,"column":23},"source":"../index.js","original":{"line":59,"column":23}},{"generated":{"line":75,"column":25},"source":"../index.js","original":{"line":59,"column":6}},{"generated":{"line":75,"column":26},"source":"../index.js","original":{"line":59,"column":26}},{"generated":{"line":75,"column":37},"source":"../index.js","original":{"line":59,"column":6}},{"name":"endCallback","generated":{"line":75,"column":39},"source":"../index.js","original":{"line":59,"column":39}},{"generated":{"line":75,"column":50},"source":"../index.js","original":{"line":59,"column":6}},{"generated":{"line":75,"column":52},"source":"../index.js","original":{"line":33,"column":49}},{"generated":{"line":75,"column":53},"source":"../index.js","original":{"line":60,"column":6}},{"generated":{"line":77,"column":0},"source":"../index.js","original":{"line":61,"column":6}},{"name":"options","generated":{"line":77,"column":11},"source":"../index.js","original":{"line":61,"column":11}},{"generated":{"line":77,"column":18},"source":"../index.js","original":{"line":61,"column":6}},{"generated":{"line":77,"column":21},"source":"../index.js","original":{"line":61,"column":21}},{"generated":{"line":77,"column":25},"source":"../index.js","original":{"line":61,"column":6}},{"generated":{"line":78,"column":0},"source":"../index.js","original":{"line":62,"column":5}},{"generated":{"line":78,"column":5},"source":"../index.js","original":{"line":2,"column":23}},{"name":"processNodes","generated":{"line":79,"column":0},"source":"../index.js","original":{"line":63,"column":4}},{"name":"processNodes","generated":{"line":79,"column":4},"source":"../index.js","original":{"line":63,"column":4}},{"generated":{"line":79,"column":16},"source":"../index.js","original":{"line":63,"column":16}},{"generated":{"line":79,"column":18},"source":"../index.js","original":{"line":63,"column":18}},{"generated":{"line":79,"column":42},"source":"../index.js","original":{"line":63,"column":29}},{"generated":{"line":80,"column":0},"source":"../index.js","original":{"line":64,"column":6}},{"generated":{"line":81,"column":0},"source":"../index.js","original":{"line":65,"column":6}},{"name":"source","generated":{"line":81,"column":10},"source":"../index.js","original":{"line":65,"column":10}},{"generated":{"line":81,"column":16},"source":"../index.js","original":{"line":65,"column":16}},{"name":"Pizzicato","generated":{"line":81,"column":19},"source":"../index.js","original":{"line":65,"column":19}},{"generated":{"line":81,"column":28},"source":"../index.js","original":{"line":65,"column":28}},{"name":"masterGainNode","generated":{"line":81,"column":29},"source":"../index.js","original":{"line":65,"column":29}},{"generated":{"line":81,"column":43},"source":"../index.js","original":{"line":65,"column":6}},{"generated":{"line":82,"column":0},"source":"../index.js","original":{"line":66,"column":6}},{"name":"dest","generated":{"line":82,"column":10},"source":"../index.js","original":{"line":66,"column":10}},{"generated":{"line":82,"column":14},"source":"../index.js","original":{"line":66,"column":14}},{"name":"Pizzicato","generated":{"line":82,"column":17},"source":"../index.js","original":{"line":66,"column":17}},{"generated":{"line":82,"column":26},"source":"../index.js","original":{"line":66,"column":26}},{"name":"context","generated":{"line":82,"column":27},"source":"../index.js","original":{"line":66,"column":27}},{"generated":{"line":82,"column":34},"source":"../index.js","original":{"line":66,"column":17}},{"name":"createMediaStreamDestination","generated":{"line":82,"column":35},"source":"../index.js","original":{"line":66,"column":35}},{"generated":{"line":82,"column":63},"source":"../index.js","original":{"line":66,"column":17}},{"generated":{"line":82,"column":65},"source":"../index.js","original":{"line":66,"column":6}},{"generated":{"line":83,"column":0},"source":"../index.js","original":{"line":67,"column":6}},{"name":"speaker","generated":{"line":83,"column":10},"source":"../index.js","original":{"line":67,"column":10}},{"generated":{"line":83,"column":17},"source":"../index.js","original":{"line":67,"column":17}},{"name":"Pizzicato","generated":{"line":83,"column":20},"source":"../index.js","original":{"line":67,"column":20}},{"generated":{"line":83,"column":29},"source":"../index.js","original":{"line":67,"column":29}},{"name":"context","generated":{"line":83,"column":30},"source":"../index.js","original":{"line":67,"column":30}},{"generated":{"line":83,"column":37},"source":"../index.js","original":{"line":67,"column":20}},{"name":"destination","generated":{"line":83,"column":38},"source":"../index.js","original":{"line":67,"column":38}},{"generated":{"line":83,"column":49},"source":"../index.js","original":{"line":67,"column":6}},{"generated":{"line":85,"column":0},"source":"../index.js","original":{"line":68,"column":6}},{"generated":{"line":85,"column":10},"source":"../index.js","original":{"line":68,"column":10}},{"name":"options","generated":{"line":85,"column":15},"source":"../index.js","original":{"line":68,"column":15}},{"generated":{"line":85,"column":22},"source":"../index.js","original":{"line":68,"column":10}},{"name":"mute","generated":{"line":85,"column":23},"source":"../index.js","original":{"line":68,"column":23}},{"generated":{"line":85,"column":27},"source":"../index.js","original":{"line":68,"column":6}},{"generated":{"line":85,"column":29},"source":"../index.js","original":{"line":68,"column":29}},{"name":"source","generated":{"line":86,"column":0},"source":"../index.js","original":{"line":69,"column":8}},{"name":"source","generated":{"line":86,"column":8},"source":"../index.js","original":{"line":69,"column":8}},{"generated":{"line":86,"column":14},"source":"../index.js","original":{"line":69,"column":14}},{"name":"disconnect","generated":{"line":86,"column":15},"source":"../index.js","original":{"line":69,"column":15}},{"generated":{"line":86,"column":25},"source":"../index.js","original":{"line":69,"column":8}},{"name":"speaker","generated":{"line":86,"column":26},"source":"../index.js","original":{"line":69,"column":26}},{"generated":{"line":86,"column":33},"source":"../index.js","original":{"line":69,"column":8}},{"generated":{"line":87,"column":0},"source":"../index.js","original":{"line":70,"column":7}},{"name":"source","generated":{"line":89,"column":0},"source":"../index.js","original":{"line":71,"column":6}},{"name":"source","generated":{"line":89,"column":6},"source":"../index.js","original":{"line":71,"column":6}},{"generated":{"line":89,"column":12},"source":"../index.js","original":{"line":71,"column":12}},{"name":"connect","generated":{"line":89,"column":13},"source":"../index.js","original":{"line":71,"column":13}},{"generated":{"line":89,"column":20},"source":"../index.js","original":{"line":71,"column":6}},{"name":"dest","generated":{"line":89,"column":21},"source":"../index.js","original":{"line":71,"column":21}},{"generated":{"line":89,"column":25},"source":"../index.js","original":{"line":71,"column":6}},{"generated":{"line":90,"column":0},"source":"../index.js","original":{"line":72,"column":6}},{"name":"source","generated":{"line":90,"column":13},"source":"../index.js","original":{"line":72,"column":13}},{"generated":{"line":90,"column":19},"source":"../index.js","original":{"line":72,"column":6}},{"generated":{"line":91,"column":0},"source":"../index.js","original":{"line":73,"column":5}},{"generated":{"line":91,"column":5},"source":"../index.js","original":{"line":2,"column":23}},{"name":"comms","generated":{"line":92,"column":0},"source":"../index.js","original":{"line":74,"column":4}},{"name":"comms","generated":{"line":92,"column":4},"source":"../index.js","original":{"line":74,"column":4}},{"generated":{"line":92,"column":9},"source":"../index.js","original":{"line":74,"column":9}},{"generated":{"line":92,"column":11},"source":"../index.js","original":{"line":74,"column":11}},{"name":"clear","generated":{"line":93,"column":0},"source":"../index.js","original":{"line":75,"column":6}},{"name":"clear","generated":{"line":93,"column":6},"source":"../index.js","original":{"line":75,"column":6}},{"generated":{"line":93,"column":11},"source":"../index.js","original":{"line":75,"column":11}},{"generated":{"line":93,"column":13},"source":"../index.js","original":{"line":75,"column":13}},{"generated":{"line":93,"column":30},"source":"../index.js","original":{"line":75,"column":24}},{"generated":{"line":94,"column":0},"source":"../index.js","original":{"line":76,"column":8}},{"name":"worker","generated":{"line":94,"column":13},"source":"../index.js","original":{"line":76,"column":13}},{"generated":{"line":94,"column":19},"source":"../index.js","original":{"line":76,"column":8}},{"name":"postMessage","generated":{"line":94,"column":20},"source":"../index.js","original":{"line":76,"column":20}},{"generated":{"line":94,"column":31},"source":"../index.js","original":{"line":76,"column":8}},{"generated":{"line":94,"column":32},"source":"../index.js","original":{"line":76,"column":32}},{"name":"command","generated":{"line":95,"column":0},"source":"../index.js","original":{"line":77,"column":10}},{"name":"command","generated":{"line":95,"column":10},"source":"../index.js","original":{"line":77,"column":10}},{"generated":{"line":95,"column":17},"source":"../index.js","original":{"line":77,"column":17}},{"generated":{"line":95,"column":19},"source":"../index.js","original":{"line":77,"column":19}},{"generated":{"line":96,"column":0},"source":"../index.js","original":{"line":76,"column":32}},{"generated":{"line":96,"column":9},"source":"../index.js","original":{"line":76,"column":8}},{"generated":{"line":97,"column":0},"source":"../index.js","original":{"line":79,"column":7}},{"generated":{"line":97,"column":7},"source":"../index.js","original":{"line":74,"column":11}},{"name":"stop","generated":{"line":98,"column":0},"source":"../index.js","original":{"line":80,"column":6}},{"name":"stop","generated":{"line":98,"column":6},"source":"../index.js","original":{"line":80,"column":6}},{"generated":{"line":98,"column":10},"source":"../index.js","original":{"line":80,"column":10}},{"generated":{"line":98,"column":12},"source":"../index.js","original":{"line":80,"column":12}},{"generated":{"line":98,"column":28},"source":"../index.js","original":{"line":80,"column":23}},{"generated":{"line":99,"column":0},"source":"../index.js","original":{"line":81,"column":8}},{"name":"worker","generated":{"line":99,"column":13},"source":"../index.js","original":{"line":81,"column":13}},{"generated":{"line":99,"column":19},"source":"../index.js","original":{"line":81,"column":8}},{"name":"postMessage","generated":{"line":99,"column":20},"source":"../index.js","original":{"line":81,"column":20}},{"generated":{"line":99,"column":31},"source":"../index.js","original":{"line":81,"column":8}},{"generated":{"line":99,"column":32},"source":"../index.js","original":{"line":81,"column":32}},{"name":"command","generated":{"line":100,"column":0},"source":"../index.js","original":{"line":82,"column":10}},{"name":"command","generated":{"line":100,"column":10},"source":"../index.js","original":{"line":82,"column":10}},{"generated":{"line":100,"column":17},"source":"../index.js","original":{"line":82,"column":17}},{"generated":{"line":100,"column":19},"source":"../index.js","original":{"line":82,"column":19}},{"generated":{"line":101,"column":0},"source":"../index.js","original":{"line":81,"column":32}},{"generated":{"line":101,"column":9},"source":"../index.js","original":{"line":81,"column":8}},{"generated":{"line":102,"column":0},"source":"../index.js","original":{"line":84,"column":7}},{"generated":{"line":102,"column":7},"source":"../index.js","original":{"line":74,"column":11}},{"name":"exportWAV","generated":{"line":103,"column":0},"source":"../index.js","original":{"line":85,"column":6}},{"name":"exportWAV","generated":{"line":103,"column":6},"source":"../index.js","original":{"line":85,"column":6}},{"generated":{"line":103,"column":15},"source":"../index.js","original":{"line":85,"column":15}},{"generated":{"line":103,"column":17},"source":"../index.js","original":{"line":85,"column":17}},{"generated":{"line":103,"column":38},"source":"../index.js","original":{"line":85,"column":28}},{"generated":{"line":104,"column":0},"source":"../index.js","original":{"line":86,"column":8}},{"name":"worker","generated":{"line":104,"column":13},"source":"../index.js","original":{"line":86,"column":13}},{"generated":{"line":104,"column":19},"source":"../index.js","original":{"line":86,"column":8}},{"name":"postMessage","generated":{"line":104,"column":20},"source":"../index.js","original":{"line":86,"column":20}},{"generated":{"line":104,"column":31},"source":"../index.js","original":{"line":86,"column":8}},{"generated":{"line":104,"column":32},"source":"../index.js","original":{"line":86,"column":32}},{"name":"command","generated":{"line":105,"column":0},"source":"../index.js","original":{"line":87,"column":10}},{"name":"command","generated":{"line":105,"column":10},"source":"../index.js","original":{"line":87,"column":10}},{"generated":{"line":105,"column":17},"source":"../index.js","original":{"line":87,"column":17}},{"generated":{"line":105,"column":19},"source":"../index.js","original":{"line":87,"column":19}},{"generated":{"line":105,"column":30},"source":"../index.js","original":{"line":86,"column":32}},{"name":"type","generated":{"line":106,"column":0},"source":"../index.js","original":{"line":88,"column":10}},{"name":"type","generated":{"line":106,"column":10},"source":"../index.js","original":{"line":88,"column":10}},{"generated":{"line":106,"column":14},"source":"../index.js","original":{"line":88,"column":14}},{"generated":{"line":106,"column":16},"source":"../index.js","original":{"line":88,"column":16}},{"generated":{"line":107,"column":0},"source":"../index.js","original":{"line":86,"column":32}},{"generated":{"line":107,"column":9},"source":"../index.js","original":{"line":86,"column":8}},{"generated":{"line":108,"column":0},"source":"../index.js","original":{"line":90,"column":7}},{"generated":{"line":108,"column":7},"source":"../index.js","original":{"line":74,"column":11}},{"name":"exportMP3","generated":{"line":109,"column":0},"source":"../index.js","original":{"line":91,"column":6}},{"name":"exportMP3","generated":{"line":109,"column":6},"source":"../index.js","original":{"line":91,"column":6}},{"generated":{"line":109,"column":15},"source":"../index.js","original":{"line":91,"column":15}},{"generated":{"line":109,"column":17},"source":"../index.js","original":{"line":91,"column":17}},{"generated":{"line":109,"column":38},"source":"../index.js","original":{"line":91,"column":28}},{"generated":{"line":110,"column":0},"source":"../index.js","original":{"line":92,"column":8}},{"name":"worker","generated":{"line":110,"column":13},"source":"../index.js","original":{"line":92,"column":13}},{"generated":{"line":110,"column":19},"source":"../index.js","original":{"line":92,"column":8}},{"name":"postMessage","generated":{"line":110,"column":20},"source":"../index.js","original":{"line":92,"column":20}},{"generated":{"line":110,"column":31},"source":"../index.js","original":{"line":92,"column":8}},{"generated":{"line":110,"column":32},"source":"../index.js","original":{"line":92,"column":32}},{"name":"command","generated":{"line":111,"column":0},"source":"../index.js","original":{"line":93,"column":10}},{"name":"command","generated":{"line":111,"column":10},"source":"../index.js","original":{"line":93,"column":10}},{"generated":{"line":111,"column":17},"source":"../index.js","original":{"line":93,"column":17}},{"generated":{"line":111,"column":19},"source":"../index.js","original":{"line":93,"column":19}},{"generated":{"line":111,"column":36},"source":"../index.js","original":{"line":92,"column":32}},{"name":"type","generated":{"line":112,"column":0},"source":"../index.js","original":{"line":94,"column":10}},{"name":"type","generated":{"line":112,"column":10},"source":"../index.js","original":{"line":94,"column":10}},{"generated":{"line":112,"column":14},"source":"../index.js","original":{"line":94,"column":14}},{"generated":{"line":112,"column":16},"source":"../index.js","original":{"line":94,"column":16}},{"generated":{"line":113,"column":0},"source":"../index.js","original":{"line":92,"column":32}},{"generated":{"line":113,"column":9},"source":"../index.js","original":{"line":92,"column":8}},{"generated":{"line":114,"column":0},"source":"../index.js","original":{"line":96,"column":7}},{"generated":{"line":115,"column":0},"source":"../index.js","original":{"line":74,"column":11}},{"generated":{"line":115,"column":5},"source":"../index.js","original":{"line":2,"column":23}},{"name":"controller","generated":{"line":116,"column":0},"source":"../index.js","original":{"line":98,"column":4}},{"name":"controller","generated":{"line":116,"column":4},"source":"../index.js","original":{"line":98,"column":4}},{"generated":{"line":116,"column":14},"source":"../index.js","original":{"line":98,"column":14}},{"generated":{"line":116,"column":16},"source":"../index.js","original":{"line":98,"column":16}},{"name":"source","generated":{"line":116,"column":36},"source":"../index.js","original":{"line":98,"column":26}},{"generated":{"line":116,"column":42},"source":"../index.js","original":{"line":98,"column":16}},{"name":"cfg","generated":{"line":116,"column":44},"source":"../index.js","original":{"line":98,"column":34}},{"generated":{"line":116,"column":47},"source":"../index.js","original":{"line":98,"column":16}},{"name":"worker","generated":{"line":116,"column":49},"source":"../index.js","original":{"line":98,"column":39}},{"generated":{"line":116,"column":55},"source":"../index.js","original":{"line":98,"column":16}},{"generated":{"line":116,"column":57},"source":"../index.js","original":{"line":98,"column":47}},{"generated":{"line":117,"column":0},"source":"../index.js","original":{"line":99,"column":6}},{"name":"recording","generated":{"line":117,"column":10},"source":"../index.js","original":{"line":99,"column":10}},{"generated":{"line":117,"column":19},"source":"../index.js","original":{"line":99,"column":19}},{"generated":{"line":117,"column":22},"source":"../index.js","original":{"line":99,"column":22}},{"generated":{"line":117,"column":27},"source":"../index.js","original":{"line":99,"column":6}},{"generated":{"line":118,"column":0},"source":"../index.js","original":{"line":100,"column":6}},{"name":"config","generated":{"line":118,"column":10},"source":"../index.js","original":{"line":100,"column":10}},{"generated":{"line":118,"column":16},"source":"../index.js","original":{"line":100,"column":16}},{"name":"cfg","generated":{"line":118,"column":19},"source":"../index.js","original":{"line":100,"column":19}},{"generated":{"line":118,"column":22},"source":"../index.js","original":{"line":100,"column":22}},{"generated":{"line":118,"column":26},"source":"../index.js","original":{"line":100,"column":26}},{"generated":{"line":118,"column":28},"source":"../index.js","original":{"line":100,"column":6}},{"generated":{"line":119,"column":0},"source":"../index.js","original":{"line":101,"column":6}},{"name":"bufferLen","generated":{"line":119,"column":10},"source":"../index.js","original":{"line":101,"column":10}},{"generated":{"line":119,"column":19},"source":"../index.js","original":{"line":101,"column":19}},{"name":"config","generated":{"line":119,"column":22},"source":"../index.js","original":{"line":101,"column":22}},{"generated":{"line":119,"column":28},"source":"../index.js","original":{"line":101,"column":28}},{"name":"bufferLen","generated":{"line":119,"column":29},"source":"../index.js","original":{"line":101,"column":29}},{"generated":{"line":119,"column":38},"source":"../index.js","original":{"line":101,"column":22}},{"generated":{"line":119,"column":42},"source":"../index.js","original":{"line":101,"column":42}},{"generated":{"line":119,"column":46},"source":"../index.js","original":{"line":101,"column":6}},{"generated":{"line":120,"column":0},"source":"../index.js","original":{"line":102,"column":6}},{"name":"context","generated":{"line":120,"column":11},"source":"../index.js","original":{"line":102,"column":11}},{"generated":{"line":120,"column":18},"source":"../index.js","original":{"line":102,"column":6}},{"name":"source","generated":{"line":120,"column":21},"source":"../index.js","original":{"line":102,"column":21}},{"generated":{"line":120,"column":27},"source":"../index.js","original":{"line":102,"column":27}},{"name":"context","generated":{"line":120,"column":28},"source":"../index.js","original":{"line":102,"column":28}},{"generated":{"line":120,"column":35},"source":"../index.js","original":{"line":102,"column":6}},{"generated":{"line":122,"column":0},"source":"../index.js","original":{"line":103,"column":6}},{"generated":{"line":122,"column":10},"source":"../index.js","original":{"line":103,"column":10}},{"generated":{"line":122,"column":11},"source":"../index.js","original":{"line":103,"column":11}},{"name":"context","generated":{"line":122,"column":16},"source":"../index.js","original":{"line":103,"column":16}},{"generated":{"line":122,"column":23},"source":"../index.js","original":{"line":103,"column":11}},{"name":"createScriptProcessor","generated":{"line":122,"column":24},"source":"../index.js","original":{"line":103,"column":24}},{"generated":{"line":122,"column":45},"source":"../index.js","original":{"line":103,"column":6}},{"generated":{"line":122,"column":47},"source":"../index.js","original":{"line":103,"column":47}},{"generated":{"line":123,"column":0},"source":"../index.js","original":{"line":104,"column":8}},{"name":"node","generated":{"line":123,"column":13},"source":"../index.js","original":{"line":104,"column":13}},{"generated":{"line":123,"column":17},"source":"../index.js","original":{"line":104,"column":8}},{"generated":{"line":123,"column":20},"source":"../index.js","original":{"line":104,"column":20}},{"name":"context","generated":{"line":123,"column":25},"source":"../index.js","original":{"line":104,"column":25}},{"generated":{"line":123,"column":32},"source":"../index.js","original":{"line":104,"column":20}},{"name":"createJavaScriptNode","generated":{"line":123,"column":33},"source":"../index.js","original":{"line":104,"column":33}},{"generated":{"line":123,"column":53},"source":"../index.js","original":{"line":104,"column":20}},{"name":"bufferLen","generated":{"line":123,"column":54},"source":"../index.js","original":{"line":104,"column":54}},{"generated":{"line":123,"column":63},"source":"../index.js","original":{"line":104,"column":20}},{"generated":{"line":123,"column":65},"source":"../index.js","original":{"line":104,"column":65}},{"generated":{"line":123,"column":66},"source":"../index.js","original":{"line":104,"column":20}},{"generated":{"line":123,"column":68},"source":"../index.js","original":{"line":104,"column":68}},{"generated":{"line":123,"column":69},"source":"../index.js","original":{"line":104,"column":20}},{"generated":{"line":123,"column":70},"source":"../index.js","original":{"line":104,"column":8}},{"generated":{"line":124,"column":0},"source":"../index.js","original":{"line":105,"column":7}},{"generated":{"line":124,"column":7},"source":"../index.js","original":{"line":103,"column":6}},{"generated":{"line":124,"column":13},"source":"../index.js","original":{"line":105,"column":13}},{"generated":{"line":125,"column":0},"source":"../index.js","original":{"line":106,"column":8}},{"name":"node","generated":{"line":125,"column":13},"source":"../index.js","original":{"line":106,"column":13}},{"generated":{"line":125,"column":17},"source":"../index.js","original":{"line":106,"column":8}},{"generated":{"line":125,"column":20},"source":"../index.js","original":{"line":106,"column":20}},{"name":"context","generated":{"line":125,"column":25},"source":"../index.js","original":{"line":106,"column":25}},{"generated":{"line":125,"column":32},"source":"../index.js","original":{"line":106,"column":20}},{"name":"createScriptProcessor","generated":{"line":125,"column":33},"source":"../index.js","original":{"line":106,"column":33}},{"generated":{"line":125,"column":54},"source":"../index.js","original":{"line":106,"column":20}},{"name":"bufferLen","generated":{"line":125,"column":55},"source":"../index.js","original":{"line":106,"column":55}},{"generated":{"line":125,"column":64},"source":"../index.js","original":{"line":106,"column":20}},{"generated":{"line":125,"column":66},"source":"../index.js","original":{"line":106,"column":66}},{"generated":{"line":125,"column":67},"source":"../index.js","original":{"line":106,"column":20}},{"generated":{"line":125,"column":69},"source":"../index.js","original":{"line":106,"column":69}},{"generated":{"line":125,"column":70},"source":"../index.js","original":{"line":106,"column":20}},{"generated":{"line":125,"column":71},"source":"../index.js","original":{"line":106,"column":8}},{"generated":{"line":126,"column":0},"source":"../index.js","original":{"line":107,"column":7}},{"name":"worker","generated":{"line":128,"column":0},"source":"../index.js","original":{"line":108,"column":6}},{"name":"worker","generated":{"line":128,"column":6},"source":"../index.js","original":{"line":108,"column":6}},{"generated":{"line":128,"column":12},"source":"../index.js","original":{"line":108,"column":12}},{"name":"postMessage","generated":{"line":128,"column":13},"source":"../index.js","original":{"line":108,"column":13}},{"generated":{"line":128,"column":24},"source":"../index.js","original":{"line":108,"column":6}},{"generated":{"line":128,"column":25},"source":"../index.js","original":{"line":108,"column":25}},{"name":"command","generated":{"line":129,"column":0},"source":"../index.js","original":{"line":109,"column":8}},{"name":"command","generated":{"line":129,"column":8},"source":"../index.js","original":{"line":109,"column":8}},{"generated":{"line":129,"column":15},"source":"../index.js","original":{"line":109,"column":15}},{"generated":{"line":129,"column":17},"source":"../index.js","original":{"line":109,"column":17}},{"generated":{"line":129,"column":23},"source":"../index.js","original":{"line":108,"column":25}},{"name":"config","generated":{"line":130,"column":0},"source":"../index.js","original":{"line":110,"column":8}},{"name":"config","generated":{"line":130,"column":8},"source":"../index.js","original":{"line":110,"column":8}},{"generated":{"line":130,"column":14},"source":"../index.js","original":{"line":110,"column":14}},{"generated":{"line":130,"column":16},"source":"../index.js","original":{"line":110,"column":16}},{"name":"sampleRate","generated":{"line":131,"column":0},"source":"../index.js","original":{"line":111,"column":10}},{"name":"sampleRate","generated":{"line":131,"column":10},"source":"../index.js","original":{"line":111,"column":10}},{"generated":{"line":131,"column":20},"source":"../index.js","original":{"line":111,"column":20}},{"generated":{"line":131,"column":22},"source":"../index.js","original":{"line":111,"column":22}},{"name":"context","generated":{"line":131,"column":27},"source":"../index.js","original":{"line":111,"column":27}},{"generated":{"line":131,"column":34},"source":"../index.js","original":{"line":111,"column":22}},{"name":"sampleRate","generated":{"line":131,"column":35},"source":"../index.js","original":{"line":111,"column":35}},{"generated":{"line":132,"column":0},"source":"../index.js","original":{"line":110,"column":16}},{"generated":{"line":133,"column":0},"source":"../index.js","original":{"line":108,"column":25}},{"generated":{"line":133,"column":7},"source":"../index.js","original":{"line":108,"column":6}},{"generated":{"line":135,"column":0},"source":"../index.js","original":{"line":114,"column":6}},{"name":"node","generated":{"line":135,"column":11},"source":"../index.js","original":{"line":114,"column":11}},{"generated":{"line":135,"column":15},"source":"../index.js","original":{"line":114,"column":6}},{"name":"onaudioprocess","generated":{"line":135,"column":16},"source":"../index.js","original":{"line":114,"column":16}},{"generated":{"line":135,"column":30},"source":"../index.js","original":{"line":114,"column":6}},{"generated":{"line":135,"column":33},"source":"../index.js","original":{"line":114,"column":33}},{"name":"e","generated":{"line":135,"column":43},"source":"../index.js","original":{"line":114,"column":42}},{"generated":{"line":135,"column":44},"source":"../index.js","original":{"line":114,"column":33}},{"generated":{"line":135,"column":46},"source":"../index.js","original":{"line":114,"column":45}},{"generated":{"line":136,"column":0},"source":"../index.js","original":{"line":115,"column":8}},{"generated":{"line":136,"column":12},"source":"../index.js","original":{"line":115,"column":12}},{"name":"recording","generated":{"line":136,"column":13},"source":"../index.js","original":{"line":115,"column":13}},{"generated":{"line":136,"column":22},"source":"../index.js","original":{"line":115,"column":8}},{"generated":{"line":136,"column":24},"source":"../index.js","original":{"line":115,"column":24}},{"name":"worker","generated":{"line":137,"column":0},"source":"../index.js","original":{"line":116,"column":8}},{"name":"worker","generated":{"line":137,"column":8},"source":"../index.js","original":{"line":116,"column":8}},{"generated":{"line":137,"column":14},"source":"../index.js","original":{"line":116,"column":14}},{"name":"postMessage","generated":{"line":137,"column":15},"source":"../index.js","original":{"line":116,"column":15}},{"generated":{"line":137,"column":26},"source":"../index.js","original":{"line":116,"column":8}},{"generated":{"line":137,"column":27},"source":"../index.js","original":{"line":116,"column":27}},{"name":"command","generated":{"line":138,"column":0},"source":"../index.js","original":{"line":117,"column":10}},{"name":"command","generated":{"line":138,"column":10},"source":"../index.js","original":{"line":117,"column":10}},{"generated":{"line":138,"column":17},"source":"../index.js","original":{"line":117,"column":17}},{"generated":{"line":138,"column":19},"source":"../index.js","original":{"line":117,"column":19}},{"generated":{"line":138,"column":27},"source":"../index.js","original":{"line":116,"column":27}},{"name":"buffer","generated":{"line":139,"column":0},"source":"../index.js","original":{"line":118,"column":10}},{"name":"buffer","generated":{"line":139,"column":10},"source":"../index.js","original":{"line":118,"column":10}},{"generated":{"line":139,"column":16},"source":"../index.js","original":{"line":118,"column":16}},{"generated":{"line":139,"column":18},"source":"../index.js","original":{"line":118,"column":18}},{"name":"e","generated":{"line":139,"column":19},"source":"../index.js","original":{"line":119,"column":12}},{"generated":{"line":139,"column":20},"source":"../index.js","original":{"line":119,"column":13}},{"name":"inputBuffer","generated":{"line":139,"column":21},"source":"../index.js","original":{"line":119,"column":14}},{"generated":{"line":139,"column":32},"source":"../index.js","original":{"line":119,"column":12}},{"name":"getChannelData","generated":{"line":139,"column":33},"source":"../index.js","original":{"line":119,"column":26}},{"generated":{"line":139,"column":47},"source":"../index.js","original":{"line":119,"column":12}},{"generated":{"line":139,"column":48},"source":"../index.js","original":{"line":119,"column":41}},{"generated":{"line":139,"column":49},"source":"../index.js","original":{"line":119,"column":12}},{"generated":{"line":139,"column":50},"source":"../index.js","original":{"line":118,"column":18}},{"name":"e","generated":{"line":139,"column":52},"source":"../index.js","original":{"line":120,"column":12}},{"generated":{"line":139,"column":53},"source":"../index.js","original":{"line":120,"column":13}},{"name":"inputBuffer","generated":{"line":139,"column":54},"source":"../index.js","original":{"line":120,"column":14}},{"generated":{"line":139,"column":65},"source":"../index.js","original":{"line":120,"column":12}},{"name":"getChannelData","generated":{"line":139,"column":66},"source":"../index.js","original":{"line":120,"column":26}},{"generated":{"line":139,"column":80},"source":"../index.js","original":{"line":120,"column":12}},{"generated":{"line":139,"column":81},"source":"../index.js","original":{"line":120,"column":41}},{"generated":{"line":139,"column":82},"source":"../index.js","original":{"line":120,"column":12}},{"generated":{"line":139,"column":83},"source":"../index.js","original":{"line":118,"column":18}},{"generated":{"line":140,"column":0},"source":"../index.js","original":{"line":116,"column":27}},{"generated":{"line":140,"column":9},"source":"../index.js","original":{"line":116,"column":8}},{"generated":{"line":141,"column":0},"source":"../index.js","original":{"line":123,"column":7}},{"generated":{"line":141,"column":7},"source":"../index.js","original":{"line":114,"column":6}},{"generated":{"line":143,"column":0},"source":"../index.js","original":{"line":125,"column":6}},{"name":"record","generated":{"line":143,"column":11},"source":"../index.js","original":{"line":125,"column":11}},{"generated":{"line":143,"column":17},"source":"../index.js","original":{"line":125,"column":6}},{"generated":{"line":143,"column":20},"source":"../index.js","original":{"line":125,"column":20}},{"generated":{"line":143,"column":32},"source":"../index.js","original":{"line":125,"column":31}},{"name":"recording","generated":{"line":144,"column":0},"source":"../index.js","original":{"line":126,"column":8}},{"name":"recording","generated":{"line":144,"column":8},"source":"../index.js","original":{"line":126,"column":8}},{"generated":{"line":144,"column":17},"source":"../index.js","original":{"line":126,"column":17}},{"generated":{"line":144,"column":20},"source":"../index.js","original":{"line":126,"column":20}},{"generated":{"line":144,"column":24},"source":"../index.js","original":{"line":126,"column":8}},{"generated":{"line":145,"column":0},"source":"../index.js","original":{"line":127,"column":7}},{"generated":{"line":145,"column":7},"source":"../index.js","original":{"line":125,"column":6}},{"generated":{"line":147,"column":0},"source":"../index.js","original":{"line":129,"column":6}},{"name":"stop","generated":{"line":147,"column":11},"source":"../index.js","original":{"line":129,"column":11}},{"generated":{"line":147,"column":15},"source":"../index.js","original":{"line":129,"column":6}},{"generated":{"line":147,"column":18},"source":"../index.js","original":{"line":129,"column":18}},{"generated":{"line":147,"column":30},"source":"../index.js","original":{"line":129,"column":29}},{"name":"recording","generated":{"line":148,"column":0},"source":"../index.js","original":{"line":130,"column":8}},{"name":"recording","generated":{"line":148,"column":8},"source":"../index.js","original":{"line":130,"column":8}},{"generated":{"line":148,"column":17},"source":"../index.js","original":{"line":130,"column":17}},{"generated":{"line":148,"column":20},"source":"../index.js","original":{"line":130,"column":20}},{"generated":{"line":148,"column":25},"source":"../index.js","original":{"line":130,"column":8}},{"generated":{"line":149,"column":0},"source":"../index.js","original":{"line":131,"column":7}},{"generated":{"line":149,"column":7},"source":"../index.js","original":{"line":129,"column":6}},{"name":"source","generated":{"line":151,"column":0},"source":"../index.js","original":{"line":133,"column":6}},{"name":"source","generated":{"line":151,"column":6},"source":"../index.js","original":{"line":133,"column":6}},{"generated":{"line":151,"column":12},"source":"../index.js","original":{"line":133,"column":12}},{"name":"connect","generated":{"line":151,"column":13},"source":"../index.js","original":{"line":133,"column":13}},{"generated":{"line":151,"column":20},"source":"../index.js","original":{"line":133,"column":6}},{"generated":{"line":151,"column":21},"source":"../index.js","original":{"line":133,"column":21}},{"name":"node","generated":{"line":151,"column":26},"source":"../index.js","original":{"line":133,"column":26}},{"generated":{"line":151,"column":30},"source":"../index.js","original":{"line":133,"column":6}},{"generated":{"line":152,"column":0},"source":"../index.js","original":{"line":134,"column":6}},{"name":"node","generated":{"line":152,"column":11},"source":"../index.js","original":{"line":134,"column":11}},{"generated":{"line":152,"column":15},"source":"../index.js","original":{"line":134,"column":6}},{"name":"connect","generated":{"line":152,"column":16},"source":"../index.js","original":{"line":134,"column":16}},{"generated":{"line":152,"column":23},"source":"../index.js","original":{"line":134,"column":6}},{"generated":{"line":152,"column":24},"source":"../index.js","original":{"line":134,"column":24}},{"name":"context","generated":{"line":152,"column":29},"source":"../index.js","original":{"line":134,"column":29}},{"generated":{"line":152,"column":36},"source":"../index.js","original":{"line":134,"column":24}},{"name":"destination","generated":{"line":152,"column":37},"source":"../index.js","original":{"line":134,"column":37}},{"generated":{"line":152,"column":48},"source":"../index.js","original":{"line":134,"column":6}},{"generated":{"line":153,"column":0},"source":"../index.js","original":{"line":135,"column":5}},{"generated":{"line":153,"column":5},"source":"../index.js","original":{"line":2,"column":23}},{"name":"createWorker","generated":{"line":154,"column":0},"source":"../index.js","original":{"line":136,"column":4}},{"name":"createWorker","generated":{"line":154,"column":4},"source":"../index.js","original":{"line":136,"column":4}},{"generated":{"line":154,"column":16},"source":"../index.js","original":{"line":136,"column":16}},{"generated":{"line":154,"column":18},"source":"../index.js","original":{"line":136,"column":18}},{"generated":{"line":154,"column":42},"source":"../index.js","original":{"line":136,"column":29}},{"generated":{"line":155,"column":0},"source":"../index.js","original":{"line":137,"column":6}},{"name":"blob","generated":{"line":155,"column":10},"source":"../index.js","original":{"line":137,"column":12}},{"generated":{"line":155,"column":14},"source":"../index.js","original":{"line":137,"column":16}},{"generated":{"line":155,"column":17},"source":"../index.js","original":{"line":137,"column":19}},{"name":"Blob","generated":{"line":155,"column":21},"source":"../index.js","original":{"line":137,"column":23}},{"generated":{"line":155,"column":25},"source":"../index.js","original":{"line":137,"column":19}},{"generated":{"line":155,"column":26},"source":"../index.js","original":{"line":137,"column":28}},{"generated":{"line":155,"column":27},"source":"../index.js","original":{"line":137,"column":29}},{"name":"workerString","generated":{"line":155,"column":32},"source":"../index.js","original":{"line":137,"column":34}},{"generated":{"line":155,"column":44},"source":"../index.js","original":{"line":137,"column":28}},{"generated":{"line":155,"column":45},"source":"../index.js","original":{"line":137,"column":19}},{"generated":{"line":155,"column":47},"source":"../index.js","original":{"line":137,"column":49}},{"name":"type","generated":{"line":156,"column":0},"source":"../index.js","original":{"line":138,"column":8}},{"name":"type","generated":{"line":156,"column":8},"source":"../index.js","original":{"line":138,"column":8}},{"generated":{"line":156,"column":12},"source":"../index.js","original":{"line":138,"column":12}},{"generated":{"line":156,"column":14},"source":"../index.js","original":{"line":138,"column":14}},{"generated":{"line":157,"column":0},"source":"../index.js","original":{"line":137,"column":49}},{"generated":{"line":157,"column":7},"source":"../index.js","original":{"line":137,"column":19}},{"generated":{"line":157,"column":8},"source":"../index.js","original":{"line":137,"column":6}},{"generated":{"line":157,"column":9},"source":"../index.js","original":{"line":136,"column":29}},{"generated":{"line":157,"column":10},"source":"../index.js","original":{"line":140,"column":6}},{"generated":{"line":159,"column":0},"source":"../index.js","original":{"line":141,"column":6}},{"generated":{"line":159,"column":13},"source":"../index.js","original":{"line":141,"column":13}},{"name":"Worker","generated":{"line":159,"column":17},"source":"../index.js","original":{"line":141,"column":17}},{"generated":{"line":159,"column":23},"source":"../index.js","original":{"line":141,"column":13}},{"name":"window","generated":{"line":159,"column":24},"source":"../index.js","original":{"line":141,"column":24}},{"generated":{"line":159,"column":30},"source":"../index.js","original":{"line":141,"column":30}},{"name":"URL","generated":{"line":159,"column":31},"source":"../index.js","original":{"line":141,"column":31}},{"generated":{"line":159,"column":34},"source":"../index.js","original":{"line":141,"column":24}},{"name":"createObjectURL","generated":{"line":159,"column":35},"source":"../index.js","original":{"line":141,"column":35}},{"generated":{"line":159,"column":50},"source":"../index.js","original":{"line":141,"column":24}},{"name":"blob","generated":{"line":159,"column":51},"source":"../index.js","original":{"line":141,"column":51}},{"generated":{"line":159,"column":55},"source":"../index.js","original":{"line":141,"column":24}},{"generated":{"line":159,"column":56},"source":"../index.js","original":{"line":141,"column":13}},{"generated":{"line":159,"column":57},"source":"../index.js","original":{"line":141,"column":6}},{"generated":{"line":160,"column":0},"source":"../index.js","original":{"line":142,"column":5}},{"generated":{"line":160,"column":5},"source":"../index.js","original":{"line":2,"column":23}},{"name":"workerString","generated":{"line":161,"column":0},"source":"../index.js","original":{"line":143,"column":4}},{"name":"workerString","generated":{"line":161,"column":4},"source":"../index.js","original":{"line":143,"column":4}},{"generated":{"line":161,"column":16},"source":"../index.js","original":{"line":143,"column":16}},{"generated":{"line":162,"column":0},"source":"../index.js","original":{"line":2,"column":23}},{"generated":{"line":162,"column":3},"source":"../index.js","original":{"line":2,"column":2}},{"generated":{"line":163,"column":0},"source":"../index.js","original":{"line":310,"column":1}}],"sources":{"../index.js":"export default function PizzicatoRecorder(Pizzicato) {\n  Pizzicato.Recorder = {\n    instance: null,\n    worker: null,\n    start: function(options) {\n      this.options = options\n      if (!this.worker) {\n        // create our worker\n        this.worker = this.createWorker();\n        // listen for events\n        this.worker.onmessage = function(e) {\n          switch (e.data.type) {\n            case 'audioBlob':\n              Pizzicato.Events.trigger('audioFile', e.data.audioBlob);\n              break;\n            case 'progress':\n              Pizzicato.Events.trigger('conversionProgress', e.data.progress);\n              break;\n          }\n        };\n      }\n      // attach our nodes\n      var source = this.processNodes();\n      // create a new recorder controller with our connected source\n      if (!this.instance) {\n        this.instance = new this.controller(source, null, this.worker);\n      }\n      // clear out any old worker data\n      this.comms.clear.call(this);\n      // start recording\n      this.instance.record();\n    },\n    stop: function(fileType, callback, progress) {\n      // stop recording\n      this.instance.stop();\n      // stop our worker from taking data\n      this.comms.stop.call(this);\n      // choose export according to filetype\n      if (fileType === 'mp3') {\n        this.comms.exportMP3.call(this);\n      } else {\n        this.comms.exportWAV.call(this);\n      }\n      if (this.options.mute) {\n        // reconnect our speakers  with timeout to avoid click\n        setTimeout(() => Pizzicato.masterGainNode.connect(Pizzicato.context.destination), 50)\n      }\n\n      function endCallback (file) {\n        callback(file, fileType);\n        Pizzicato.Events.off('audioFile', endCallback)\n      }\n      function progressCallback () {\n        progress();\n        Pizzicato.Events.off('conversionProgress', progressCallback)\n      }\n      // attach event listeners\n      Pizzicato.Events.on('conversionProgress', progressCallback);\n      Pizzicato.Events.on('audioFile', endCallback);\n      // remove options\n      this.options = null\n    },\n    processNodes: function() {\n      // connect our master gain node to a media stream destination for processing audio\n      var source = Pizzicato.masterGainNode;\n      var dest = Pizzicato.context.createMediaStreamDestination();\n      var speaker = Pizzicato.context.destination\n      if (this.options.mute) {\n        source.disconnect(speaker)\n      }\n      source.connect(dest);\n      return source;\n    },\n    comms: {\n      clear: function() {\n        this.worker.postMessage({\n          command: 'clear'\n        });\n      },\n      stop: function() {\n        this.worker.postMessage({\n          command: 'stopRecord'\n        });\n      },\n      exportWAV: function() {\n        this.worker.postMessage({\n          command: 'exportWAV',\n          type: 'audio/wav'\n        });\n      },\n      exportMP3: function() {\n        this.worker.postMessage({\n          command: 'exportStereoMP3',\n          type: 'audio/wav'\n        });\n      }\n    },\n    controller: function (source, cfg, worker) {\n      var recording = false;\n      var config = cfg || {};\n      var bufferLen = config.bufferLen || 4096;\n      this.context = source.context;\n      if (!this.context.createScriptProcessor) {\n        this.node = this.context.createJavaScriptNode(bufferLen, 2, 2);\n      } else {\n        this.node = this.context.createScriptProcessor(bufferLen, 2, 2);\n      }\n      worker.postMessage({\n        command: 'init',\n        config: {\n          sampleRate: this.context.sampleRate\n        }\n      });\n      this.node.onaudioprocess = function(e) {\n        if (!recording) return;\n        worker.postMessage({\n          command: 'record',\n          buffer: [\n            e.inputBuffer.getChannelData(0),\n            e.inputBuffer.getChannelData(1)\n          ]\n        });\n      };\n\n      this.record = function() {\n        recording = true;\n      };\n\n      this.stop = function() {\n        recording = false;\n      };\n\n      source.connect(this.node);\n      this.node.connect(this.context.destination);\n    },\n    createWorker: function() {\n      const blob = new Blob([this.workerString], {\n        type: \"text/javascript\"\n      })\n      // Note: window.webkitURL.createObjectURL() in Chrome 10+.\n      return new Worker(window.URL.createObjectURL(blob));\n    },\n    workerString: `\n      function createLog(action) {\n        console.info('Recorder: ' + action);\n      }\n\n      // some params \n      var recLength = 0;\n      var sampleRate;\n\n      // original recorded buffers\n      var recBuffersL = [];\n      var recBuffersR = [];\n\n      // comms\n      this.onmessage = function (e) {\n        switch (e.data.command) {\n          case 'init':\n            init(e.data.config);\n            break;\n          case 'record':\n            record(e.data.buffer);\n            break;\n          case 'stopRecord':\n            createSamples();\n            break;\n          case 'exportWAV':\n            exportWAV(e.data.type);\n            break;\n          case 'clear':\n            clear();\n            break;\n        }\n      };\n\n      function init (config) {\n        sampleRate = config.sampleRate;\n      }\n\n      function record (inputBuffer) {\n        // push to our original buffers\n        recBuffersL.push(inputBuffer[0]);\n        recBuffersR.push(inputBuffer[1]);\n\n        // store the recording length\n        recLength += inputBuffer[0].length;\n      }\n\n      function exportWAV (type) {\n        // merge all our buffers\n        recBuffersL = mergeBuffers(recBuffersL, recLength);\n        recBuffersR = mergeBuffers(recBuffersR, recLength);\n        // create our samples from our buffer for wav\n        var samples = createSamples();\n        // make the wav\n        var dataview = encodeWAV(samples);\n        var audioBlob = new Blob([dataview], { type: 'audio/wav' });\n        // post it back\n        this.postMessage({ type: 'audioBlob', audioBlob: audioBlob });\n      }\n\n      function createSamples() {\n        return interleave(recBuffersL, recBuffersR)\n      }\n\n      function clear () {\n        recLength = 0;\n        recBuffersL = [];\n        recBuffersR = [];\n      }\n\n      function mergeBuffers (recBuffers, recLength) {\n        var result = new Float32Array(recLength);\n        var offset = 0;\n        for (var i = 0; i < recBuffers.length; i++) {\n          result.set(recBuffers[i], offset);\n          offset += recBuffers[i].length;\n        }\n        return result;\n      }\n\n      function interleave (inputL, inputR) {\n        var length = inputL.length + inputR.length;\n        var result = new Float32Array(length);\n\n        var index = 0,\n          inputIndex = 0;\n\n        while (index < length) {\n          result[index++] = inputL[inputIndex];\n          result[index++] = inputR[inputIndex];\n          inputIndex++;\n        }\n        return result;\n      }\n\n      function floatTo16BitPCM (output, offset, input) {\n        for (var i = 0; i < input.length; i++, offset += 2) {\n          var s = Math.max(-1, Math.min(1, input[i]));\n          output.setInt16(offset, s < 0 ? s * 0x8000 : s * 0x7fff, true);\n        }\n      }\n\n      function writeString (view, offset, string) {\n        for (var i = 0; i < string.length; i++) {\n          view.setUint8(offset + i, string.charCodeAt(i));\n        }\n      }\n\n      function encodeWAV (samples, mono) {\n        var buffer = new ArrayBuffer(44 + samples.length * 2);\n        var view = new DataView(buffer);\n\n        /* RIFF identifier */\n        writeString(view, 0, 'RIFF');\n        /* file length */\n        view.setUint32(4, 32 + samples.length * 2, true);\n        /* RIFF type */\n        writeString(view, 8, 'WAVE');\n        /* format chunk identifier */\n        writeString(view, 12, 'fmt ');\n        /* format chunk length */\n        view.setUint32(16, 16, true);\n        /* sample format (raw) */\n        view.setUint16(20, 1, true);\n        /* channel count */\n        view.setUint16(22, mono ? 1 : 2, true);\n        /* sample rate */\n        view.setUint32(24, sampleRate, true);\n        /* byte rate (sample rate * block align) */\n        view.setUint32(28, sampleRate * 4, true);\n        /* block align (channel count * bytes per sample) */\n        view.setUint16(32, 4, true);\n        /* bits per sample */\n        view.setUint16(34, 16, true);\n        /* data chunk identifier */\n        writeString(view, 36, 'data');\n        /* data chunk length */\n        view.setUint32(40, samples.length * 2, true);\n\n        floatTo16BitPCM(view, 44, samples);\n\n        return view;\n      }\n\n      function convertBuffer (buffers) {\n        var lo = buffers[0];\n        var ro = buffers[1];\n\n        // if we are not a float32array already, lets merge standard array of float32s to one float32\n        if (buffers[0].constructor !== Float32Array) {\n            lo = mergeBuffers(buffers[0], recLength);\n            ro = mergeBuffers(buffers[1], recLength);\n        }\n\n        var l = new Float32Array(lo.length); // The transformed data, this is what you will pass to lame instead\n        var r = new Float32Array(ro.length);\n\n        // Convert to required format\n        for (var i = 0; i < lo.length; i++) {\n          l[i] = lo[i] * 32767.5;\n          r[i] = ro[i] * 32767.5;\n        }\n\n        return { l: l, r: r };\n      }\n    `\n  };\n}"},"lineCount":null}},"error":null,"hash":"6b4af383ee3c13ac78a6334da5c78e96","cacheData":{"env":{}}}